<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Server Faultè³ªå•ãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚° - Mirai IT Knowledge Systems">
    <title>Server Faultè³ªå•ãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚° - Mirai IT Knowledge Systems</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<style>
    .layout-sidebar {
        grid-template-columns: 240px 1fr;
    }
</style>
<body>
    <!-- Header -->
    <header class="header" role="banner">
        <div class="container">
            <div class="header-content">
                <div>
                    <h1 class="header-title">Mirai IT Knowledge Systems</h1>
                    <p class="header-subtitle">ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆãªITãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†</p>
                </div>
                <div class="header-actions">
                    <a href="create.html" class="btn" aria-label="æ–°è¦ä½œæˆ">
                        <span aria-hidden="true">âœï¸</span> æ–°è¦ä½œæˆ
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav" role="navigation" aria-label="ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
        <div class="container nav-container">
            <ul class="nav-list">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">
                        <span aria-hidden="true">ğŸ </span> ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
                    </a>
                </li>
                <li class="nav-item">
                    <a href="knowledge-list.html" class="nav-link">
                        <span aria-hidden="true">ğŸ“š</span> ãƒŠãƒ¬ãƒƒã‚¸ä¸€è¦§
                    </a>
                </li>
                <li class="nav-item">
                    <a href="create.html" class="nav-link">
                        <span aria-hidden="true">âœï¸</span> ä½œæˆ
                    </a>
                </li>
                <li class="nav-item">
                    <a href="search.html" class="nav-link">
                        <span aria-hidden="true">ğŸ”</span> ç¤¾å†…æ¤œç´¢
                    </a>
                </li>
                <li class="nav-item">
                    <a href="ai-search.html" class="nav-link">
                        <span aria-hidden="true">ğŸ§ </span> AIæ¤œç´¢
                    </a>
                </li>
                <li class="nav-item">
                    <a href="sf-browser.html" class="nav-link active" aria-current="page">
                        <span aria-hidden="true">ğŸ’¬</span> Server Fault
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main" role="main">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header">
                <h1 class="page-title">
                    <span aria-hidden="true">ğŸ’¬</span> Server Faultè³ªå•ãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°
                </h1>
                <p class="page-description">
                    Server Faultã‹ã‚‰å–å¾—ã—ãŸæŠ€è¡“çš„ãªè³ªå•ã¨å›ç­”ã‚’å‚ç…§ã§ãã¾ã™
                </p>
            </div>

            <!-- Info Banner -->
            <div class="alert alert-info" style="margin-bottom: 2rem;">
                <strong><span aria-hidden="true">â„¹ï¸</span> Server Faultã«ã¤ã„ã¦</strong>
                <p style="margin: 0.5rem 0 0 0;">
                    Server Faultã¯ã€ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã‚„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç®¡ç†è€…å‘ã‘ã®Q&Aã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ã™ã€‚
                    å®Ÿéš›ã®ç¾å ´ã§ç™ºç”Ÿã—ãŸå•é¡Œã¨è§£æ±ºç­–ãŒè“„ç©ã•ã‚Œã¦ãŠã‚Šã€ITãƒŠãƒ¬ãƒƒã‚¸ã®å‚è€ƒè³‡æ–™ã¨ã—ã¦æ´»ç”¨ã§ãã¾ã™ã€‚
                </p>
            </div>

            <!-- Search and Filter Layout -->
            <div class="layout-sidebar">
                <!-- Sidebar with Filters -->
                <aside class="sidebar" role="complementary" aria-label="ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼">
                    <div class="filter-panel">
                        <h2 style="font-size: 1.25rem; margin-bottom: 1rem;">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</h2>

                        <!-- Status Filter -->
                        <div class="filter-group">
                            <h3 class="filter-title">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</h3>
                            <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" name="status" value="answered" checked style="margin-right: 0.5rem;">
                                    <span>å›ç­”æ¸ˆã¿</span>
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" name="status" value="unanswered" style="margin-right: 0.5rem;">
                                    <span>æœªå›ç­”</span>
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" name="status" value="accepted" checked style="margin-right: 0.5rem;">
                                    <span>è§£æ±ºæ¸ˆã¿</span>
                                </label>
                            </div>
                        </div>

                        <!-- Popular Tags -->
                        <div class="filter-group">
                            <h3 class="filter-title">äººæ°—ã‚¿ã‚°</h3>
                            <div class="tags">
                                <button class="tag" data-tag="apache">apache</button>
                                <button class="tag" data-tag="mysql">mysql</button>
                                <button class="tag" data-tag="nginx">nginx</button>
                                <button class="tag" data-tag="linux">linux</button>
                                <button class="tag" data-tag="ssl">ssl</button>
                                <button class="tag" data-tag="dns">dns</button>
                            </div>
                        </div>

                        <!-- Score Range -->
                        <div class="filter-group">
                            <h3 class="filter-title">ã‚¹ã‚³ã‚¢</h3>
                            <select class="form-select" id="scoreFilter" aria-label="ã‚¹ã‚³ã‚¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼">
                                <option value="">ã™ã¹ã¦</option>
                                <option value="10">10ä»¥ä¸Š</option>
                                <option value="50">50ä»¥ä¸Š</option>
                                <option value="100">100ä»¥ä¸Š</option>
                            </select>
                        </div>

                        <!-- Filter Actions -->
                        <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                            <button class="btn btn-primary" style="flex: 1;" onclick="applyFilters()">
                                é©ç”¨
                            </button>
                            <button class="btn btn-outline" style="flex: 1;" onclick="clearFilters()">
                                ã‚¯ãƒªã‚¢
                            </button>
                        </div>
                    </div>

                    <!-- Stats -->
                    <div class="card" style="margin-top: 1rem;">
                        <h3 style="font-size: 1rem; margin-bottom: 1rem;">çµ±è¨ˆ</h3>
                        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--color-text-secondary);">å–å¾—æ¸ˆã¿è³ªå•:</span>
                                <strong id="totalQuestions">248</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--color-text-secondary);">è§£æ±ºæ¸ˆã¿:</span>
                                <strong id="answeredQuestions">192</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--color-text-secondary);">æœªå›ç­”:</span>
                                <strong id="unansweredQuestions">56</strong>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Main Content Area -->
                <div style="flex: 1; min-width: 0;">
                    <!-- Search Box -->
                    <div class="card" style="margin-bottom: 1.5rem;">
                        <form id="searchForm" role="search" onsubmit="performSearch(event)">
                            <div class="search-box">
                                <input
                                    type="search"
                                    id="searchInput"
                                    placeholder="ä¾‹: apache 503 error"
                                    aria-label="è³ªå•ã‚’æ¤œç´¢"
                                    autofocus
                                    style="height: 52px; font-size: 1rem; padding: 0.75rem 1rem;"
                                >
                            </div>
                            <p class="form-help">
                                ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚„ã‚¿ã‚°ã§æ¤œç´¢ã§ãã¾ã™ã€‚æ—¥æœ¬èªã§ã‚‚æ¤œç´¢ã§ãã¾ã™ã€‚
                            </p>
                        </form>
                    </div>

                    <!-- Results Header -->
                    <div class="section-header">
                        <h2 class="section-title">
                            è³ªå•ä¸€è¦§ <span id="resultCount" style="color: var(--color-text-secondary);">(248ä»¶)</span>
                        </h2>
                        <div class="section-actions">
                            <select class="form-select" id="sortBy" aria-label="ä¸¦ã³æ›¿ãˆ" onchange="sortResults()">
                                <option value="score">ã‚¹ã‚³ã‚¢é †</option>
                                <option value="date">æ–°ã—ã„é †</option>
                                <option value="views">é–²è¦§æ•°é †</option>
                            </select>
                        </div>
                    </div>

                    <!-- Question List -->
                    <div style="display: flex; flex-direction: column; gap: 1rem;" id="questionList" role="region" aria-live="polite" aria-label="è³ªå•ä¸€è¦§">
                        <div class="spinner"></div>
                    </div>

                    <!-- Pagination -->
                    <div style="display: flex; justify-content: center; align-items: center; gap: 1rem; margin-top: 2rem;" role="navigation" aria-label="ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³">
                        <button class="btn btn-outline" disabled aria-label="å‰ã®ãƒšãƒ¼ã‚¸">å‰ã¸</button>
                        <span style="color: var(--color-text-secondary);">ãƒšãƒ¼ã‚¸ 1 / 10</span>
                        <button class="btn btn-outline" aria-label="æ¬¡ã®ãƒšãƒ¼ã‚¸">æ¬¡ã¸</button>
                    </div>
                </div>
            </div>

            <!-- Tips -->
            <section class="section">
                <div class="card" style="background: #e8f5e9; border-left: 4px solid var(--color-success);">
                    <h3 style="color: #2e7d32; margin-bottom: 1rem;">
                        <span aria-hidden="true">ğŸ’¡</span> Server Faultæ´»ç”¨ã®ãƒ’ãƒ³ãƒˆ
                    </h3>
                    <ul style="line-height: 2; color: #666;">
                        <li>é«˜ã‚¹ã‚³ã‚¢ã®è³ªå•ã¯å¤šãã®äººãŒå‚è€ƒã«ã—ãŸå®Ÿç”¨çš„ãªå†…å®¹ã§ã™</li>
                        <li>ã€Œè§£æ±ºæ¸ˆã¿ã€ãƒãƒ¼ã‚¯ã®ã‚ã‚‹è³ªå•ã¯ã€æ‰¿èªã•ã‚ŒãŸå›ç­”ãŒå­˜åœ¨ã—ã¾ã™</li>
                        <li>ã‚¿ã‚°ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ç‰¹å®šã®æŠ€è¡“é ˜åŸŸã®è³ªå•ã‚’åŠ¹ç‡çš„ã«æ¢ã›ã¾ã™</li>
                        <li>ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã‚’ä½¿ã†ã¨ã€Server Faultã®è³ªå•ã‚’ãƒŠãƒ¬ãƒƒã‚¸ã¨ã—ã¦ä¿å­˜ã§ãã¾ã™</li>
                        <li>å¤–éƒ¨ãƒªãƒ³ã‚¯ã‹ã‚‰å…ƒã®è³ªå•ã‚’å‚ç…§ã—ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®è­°è«–ã‚’ç¢ºèªã§ãã¾ã™</li>
                    </ul>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Mirai IT Knowledge Systems</h4>
                    <p>AIã‚’æ´»ç”¨ã—ãŸã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆãªITãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
                </div>
                <div class="footer-section">
                    <h4>ãƒªãƒ³ã‚¯</h4>
                    <p><a href="index.html">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a></p>
                    <p><a href="knowledge-list.html">ãƒŠãƒ¬ãƒƒã‚¸ä¸€è¦§</a></p>
                    <p><a href="search.html">ç¤¾å†…æ¤œç´¢</a></p>
                    <p><a href="ai-search.html">AIæ¤œç´¢</a></p>
                    <p><a href="create.html">ãƒŠãƒ¬ãƒƒã‚¸ä½œæˆ</a></p>
                </div>
                <div class="footer-section">
                    <h4>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h4>
                    <p><a href="README.md">ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</a></p>
                    <p><a href="#" aria-label="APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ">APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Mirai IT Knowledge Systems. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        const state = {
            questions: [],
            filtered: [],
            answersCache: {}
        };

        function mapStatus(item) {
            if (item.has_accepted_answer) return 'accepted';
            if (item.is_answered) return 'answered';
            return 'unanswered';
        }

        function renderQuestions(list) {
            const container = document.getElementById('questionList');
            container.innerHTML = '';

            if (!list.length) {
                container.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ğŸ“­</div><h3>è©²å½“ã™ã‚‹è³ªå•ãŒã‚ã‚Šã¾ã›ã‚“</h3></div>';
                return;
            }

            list.forEach(item => {
                const status = mapStatus(item);
                const statusColor = status === 'accepted' ? 'var(--color-success)' : (status === 'answered' ? 'var(--color-info)' : 'var(--color-border)');
                const tags = (item.tags || []).map(tag => `<span class="tag">${tag}</span>`).join('');
                const answersContainerId = `answers-${item.question_id}`;

                container.insertAdjacentHTML('beforeend', `
                    <article class="card" style="border-left: 4px solid ${statusColor};">
                        <div style="display: flex; gap: 1rem;">
                            <div style="display: flex; flex-direction: column; gap: 0.5rem; min-width: 80px; text-align: center; color: var(--color-text-secondary); font-size: 0.875rem;">
                                <div>
                                    <strong style="display: block; font-size: 1.5rem; color: ${statusColor};">${item.score ?? 0}</strong>
                                    <span>æŠ•ç¥¨</span>
                                </div>
                                <div style="background: ${status === 'accepted' ? 'var(--color-success)' : 'var(--color-border)'}; color: ${status === 'accepted' ? 'white' : 'var(--color-text)'}; padding: 0.25rem; border-radius: var(--radius-sm);">
                                    <strong style="display: block; font-size: 1.25rem;">${item.answer_count ?? 0}</strong>
                                    <span style="font-size: 0.75rem;">å›ç­”</span>
                                </div>
                                <div>
                                    <strong style="display: block; font-size: 1rem;">${item.view_count ?? 0}</strong>
                                    <span>é–²è¦§</span>
                                </div>
                            </div>
                            <div style="flex: 1;">
                                <h3 style="margin-bottom: 0.5rem;">
                                    <a href="${item.link}" style="color: var(--color-primary); font-size: 1.125rem; text-decoration: none;" target="_blank" rel="noopener noreferrer">
                                        ${item.title}
                                    </a>
                                </h3>
                                <p style="color: var(--color-text-secondary); margin-bottom: 0.75rem; line-height: 1.6;">
                                    ${item.excerpt || ''}
                                </p>
                                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 0.5rem;">
                                    <div class="tags">${tags}</div>
                                    <div style="display: flex; gap: 1rem; align-items: center; font-size: 0.875rem; color: var(--color-text-secondary);">
                                        <button class="btn btn-sm btn-outline" onclick="importQuestion('${item.question_id}')">
                                            <span aria-hidden="true">ğŸ“¥</span> ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                                        </button>
                                        <button class="btn btn-sm btn-outline" onclick="toggleAnswers('${item.question_id}')">
                                            <span aria-hidden="true">ğŸ’¬</span> å›ç­”ã‚’è¡¨ç¤º
                                        </button>
                                        <a href="${item.link}" target="_blank" rel="noopener noreferrer" style="color: var(--color-primary);">
                                            è©³ç´° <span aria-hidden="true">ğŸ”—</span>
                                        </a>
                                    </div>
                                </div>
                                <div id="${answersContainerId}" style="margin-top: 1rem; display: none;"></div>
                            </div>
                        </div>
                    </article>
                `);
            });
        }

        function updateStats(list) {
            const total = list.length;
            const answered = list.filter(item => mapStatus(item) !== 'unanswered').length;
            const unanswered = total - answered;
            document.getElementById('totalQuestions').textContent = total;
            document.getElementById('answeredQuestions').textContent = answered;
            document.getElementById('unansweredQuestions').textContent = unanswered;
            document.getElementById('resultCount').textContent = `(${total}ä»¶)`;
        }

        function applyFilters() {
            const statusFilters = Array.from(document.querySelectorAll('input[name="status"]:checked')).map(cb => cb.value);
            const scoreThreshold = parseInt(document.getElementById('scoreFilter').value || '0', 10);
            const query = document.getElementById('searchInput').value.toLowerCase();

            state.filtered = state.questions.filter(item => {
                const status = mapStatus(item);
                if (statusFilters.length && !statusFilters.includes(status)) return false;
                if ((item.score ?? 0) < scoreThreshold) return false;
                if (query) {
                    const haystack = `${item.title} ${item.excerpt} ${(item.tags || []).join(' ')}`.toLowerCase();
                    if (!haystack.includes(query)) return false;
                }
                return true;
            });

            renderQuestions(state.filtered);
            updateStats(state.filtered);
        }

        function clearFilters() {
            document.querySelectorAll('input[name="status"]').forEach(cb => cb.checked = true);
            document.getElementById('scoreFilter').value = '';
            document.getElementById('searchInput').value = '';
            state.filtered = [...state.questions];
            renderQuestions(state.filtered);
            updateStats(state.filtered);
        }

        function sortResults() {
            const sortBy = document.getElementById('sortBy').value;
            const list = state.filtered.length ? state.filtered : state.questions;
            const sorted = [...list];
            if (sortBy === 'score') {
                sorted.sort((a, b) => (b.score ?? 0) - (a.score ?? 0));
            } else if (sortBy === 'views') {
                sorted.sort((a, b) => (b.view_count ?? 0) - (a.view_count ?? 0));
            } else {
                sorted.sort((a, b) => (b.creation_date ?? 0) - (a.creation_date ?? 0));
            }
            state.filtered = sorted;
            renderQuestions(sorted);
        }

        function performSearch(event) {
            if (event) event.preventDefault();
            applyFilters();
        }

        function importQuestion(questionId) {
            if (confirm('ã“ã®è³ªå•ã‚’ãƒŠãƒ¬ãƒƒã‚¸ã¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                alert('è³ªå•ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼ä½œæˆãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™ã€‚');
                window.location.href = `create.html?import=sf-${questionId}`;
            }
        }

        async function toggleAnswers(questionId) {
            const container = document.getElementById(`answers-${questionId}`);
            if (!container) return;
            if (container.dataset.loaded === 'true') {
                container.style.display = container.style.display === 'none' ? 'block' : 'none';
                return;
            }

            container.style.display = 'block';
            container.innerHTML = '<div class="spinner"></div>';
            try {
                const apiBase = resolveApiBase();
                const response = await fetch(`${apiBase}/api/serverfault/answers?question_id=${questionId}&translate=true`);
                const data = await response.json();
                if (!data.success) throw new Error(data.error || 'fetch failed');
                const answers = data.items || [];
                state.answersCache[questionId] = answers;
                container.innerHTML = renderAnswers(answers);
                container.dataset.loaded = 'true';
            } catch (err) {
                container.innerHTML = `<div class="empty-state"><div class="empty-state-icon">âš ï¸</div><h3>å›ç­”ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ</h3><p>${err}</p></div>`;
            }
        }

        function renderAnswers(answers) {
            if (!answers.length) {
                return '<div class="empty-state"><div class="empty-state-icon">ğŸ’¬</div><h3>å›ç­”ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“</h3></div>';
            }

            return answers.map(answer => `
                <article class="card" style="background:#f8f9fb; margin-bottom: 0.75rem; border-left: 4px solid ${answer.is_accepted ? 'var(--color-success)' : 'var(--color-border)'};">
                    <div style="display:flex; justify-content: space-between; align-items:center; margin-bottom:0.5rem;">
                        <strong>${answer.is_accepted ? 'âœ… æ‰¿èªæ¸ˆã¿å›ç­”' : 'å›ç­”'}</strong>
                        <span style="color: var(--color-text-secondary);">ã‚¹ã‚³ã‚¢: ${answer.score ?? 0}</span>
                    </div>
                    <p style="color: var(--color-text-secondary); line-height:1.7;">${answer.body || answer.excerpt || ''}</p>
                </article>
            `).join('');
        }

        document.querySelectorAll('.tag').forEach(tag => {
            tag.addEventListener('click', function() {
                const tagName = this.dataset.tag;
                if (tagName) {
                    document.getElementById('searchInput').value = tagName;
                    performSearch();
                }
            });
        });

        document.getElementById('searchInput').addEventListener('input', function() {
            clearTimeout(this.searchTimeout);
            this.searchTimeout = setTimeout(() => {
                applyFilters();
            }, 500);
        });

        function resolveApiBase() {
            const params = new URLSearchParams(window.location.search);
            const api = params.get('api');
            if (api) return api.replace(/\/+$/, '');
            if (window.location.origin && window.location.origin !== 'null') {
                return window.location.origin.replace(/\/+$/, '');
            }
            return 'http://localhost:8888';
        }

        async function loadQuestions() {
            const container = document.getElementById('questionList');
            container.innerHTML = '<div class="spinner"></div>';
            try {
                const apiBase = resolveApiBase();
                const response = await fetch(`${apiBase}/api/serverfault/questions?pagesize=20&translate=true`);
                const data = await response.json();
                if (!data.success) throw new Error(data.error || 'fetch failed');
                state.questions = data.items || [];
                state.filtered = [...state.questions];
                renderQuestions(state.filtered);
                updateStats(state.filtered);
            } catch (err) {
                container.innerHTML = `<div class="empty-state"><div class="empty-state-icon">âš ï¸</div><h3>å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ</h3><p>${err}</p><p>ä¾‹: ?api=http://localhost:8888 ã‚’URLæœ«å°¾ã«ä»˜ã‘ã¦å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„</p></div>`;
            }
        }

        document.addEventListener('DOMContentLoaded', loadQuestions);
    </script>
</body>
</html>
