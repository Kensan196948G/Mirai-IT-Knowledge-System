<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ãƒŠãƒ¬ãƒƒã‚¸è©³ç´° - Mirai IT Knowledge Systems">
    <title>ãƒŠãƒ¬ãƒƒã‚¸è©³ç´° - Mirai IT Knowledge Systems</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <!-- Header -->
    <header class="header" role="banner">
        <div class="container">
            <div class="header-content">
                <div>
                    <h1 class="header-title">Mirai IT Knowledge Systems</h1>
                    <p class="header-subtitle">ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆãªITãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†</p>
                </div>
                <div class="header-actions">
                    <a href="create.html" class="btn" aria-label="æ–°è¦ä½œæˆ">
                        <span aria-hidden="true">âœï¸</span> æ–°è¦ä½œæˆ
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav" role="navigation" aria-label="ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
        <div class="container nav-container">
            <ul class="nav-list">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">
                        <span aria-hidden="true">ğŸ </span> ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
                    </a>
                </li>
                <li class="nav-item">
                    <a href="knowledge-list.html" class="nav-link">
                        <span aria-hidden="true">ğŸ“š</span> ãƒŠãƒ¬ãƒƒã‚¸ä¸€è¦§
                    </a>
                </li>
                <li class="nav-item">
                    <a href="create.html" class="nav-link">
                        <span aria-hidden="true">âœï¸</span> ä½œæˆ
                    </a>
                </li>
                <li class="nav-item">
                    <a href="search.html" class="nav-link">
                        <span aria-hidden="true">ğŸ”</span> ç¤¾å†…æ¤œç´¢
                    </a>
                </li>
                <li class="nav-item">
                    <a href="ai-search.html" class="nav-link">
                        <span aria-hidden="true">ğŸ§ </span> AIæ¤œç´¢
                    </a>
                </li>
                <li class="nav-item">
                    <a href="sf-browser.html" class="nav-link">
                        <span aria-hidden="true">ğŸ’¬</span> Server Fault
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main" role="main">
        <div class="container">
            <!-- Breadcrumb -->
            <nav aria-label="ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆ">
                <ul class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">ãƒ›ãƒ¼ãƒ </a></li>
                    <li class="breadcrumb-item"><a href="knowledge-list.html">ãƒŠãƒ¬ãƒƒã‚¸ä¸€è¦§</a></li>
                    <li class="breadcrumb-item active" aria-current="page">ãƒŠãƒ¬ãƒƒã‚¸è©³ç´°</li>
                </ul>
            </nav>

            <!-- Knowledge Detail -->
            <article class="card">
                <!-- Header -->
                <div class="card-header" style="border-bottom: 2px solid var(--color-border); padding-bottom: 1rem;">
                    <div style="flex: 1;">
                        <h1 id="knowledgeTitle" style="font-size: 2rem; margin-bottom: 0.5rem;">
                            Webã‚µãƒ¼ãƒãƒ¼ã®503ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®å¯¾å¿œæ‰‹é †
                        </h1>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <span class="badge badge-incident" id="itsmBadge" role="status">Incident</span>
                            <span style="color: var(--color-text-secondary); font-size: 0.875rem;">
                                ID: <span id="knowledgeId">KB-2026-001</span>
                            </span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn btn-outline btn-sm" onclick="editKnowledge()" aria-label="ç·¨é›†">
                            <span aria-hidden="true">âœï¸</span> ç·¨é›†
                        </button>
                        <button class="btn btn-outline btn-sm" onclick="shareKnowledge()" aria-label="å…±æœ‰">
                            <span aria-hidden="true">ğŸ”—</span> å…±æœ‰
                        </button>
                    </div>
                </div>

                <!-- Metadata -->
                <div style="background: var(--color-bg); padding: 1rem; border-radius: var(--radius-md); margin: 1.5rem 0;">
                    <div class="grid grid-3">
                        <div>
                            <strong style="color: var(--color-text-secondary);">ä½œæˆæ—¥æ™‚:</strong>
                            <p id="createdAt" style="margin: 0.25rem 0 0 0;">2026-01-15 14:30</p>
                        </div>
                        <div>
                            <strong style="color: var(--color-text-secondary);">æ›´æ–°æ—¥æ™‚:</strong>
                            <p id="updatedAt" style="margin: 0.25rem 0 0 0;">2026-01-15 14:30</p>
                        </div>
                        <div>
                            <strong style="color: var(--color-text-secondary);">ä½œæˆè€…:</strong>
                            <p id="createdBy" style="margin: 0.25rem 0 0 0;">webui_user</p>
                        </div>
                    </div>
                </div>

                <!-- AI Summaries -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                    <!-- Technical Summary -->
                    <div class="alert alert-info">
                        <h3 style="font-size: 1rem; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                            <span aria-hidden="true">ğŸ“</span> æŠ€è¡“è€…å‘ã‘è¦ç´„
                        </h3>
                        <p id="technicalSummary" style="margin: 0; line-height: 1.6;">
                            Apacheã‚µãƒ¼ãƒãƒ¼ã§503ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸéš›ã®èª¿æŸ»æ‰‹é †ã¨å¯¾å¿œæ–¹æ³•ã€‚ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ç¢ºèªã€ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ã®ç¢ºèªã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œè¨¼ã€ã‚µãƒ¼ãƒ“ã‚¹å†èµ·å‹•ã®æ‰‹é †ã‚’è¨˜è¼‰ã€‚
                        </p>
                    </div>

                    <!-- Non-Technical Summary -->
                    <div class="alert alert-warning" style="background-color: #f3e5f5; border-left-color: #7b1fa2;">
                        <h3 style="font-size: 1rem; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem; color: #6a1b9a;">
                            <span aria-hidden="true">ğŸ‘¥</span> éæŠ€è¡“è€…å‘ã‘è¦ç´„
                        </h3>
                        <p id="nonTechnicalSummary" style="margin: 0; line-height: 1.6; color: #4a148c;">
                            Webã‚µã‚¤ãƒˆãŒã€Œã‚µãƒ¼ãƒ“ã‚¹åˆ©ç”¨ä¸å¯ã€ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹å•é¡Œã¸ã®å¯¾å‡¦æ–¹æ³•ã§ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã€å¿…è¦ã«å¿œã˜ã¦å†èµ·å‹•ã™ã‚‹æ‰‹é †ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚
                        </p>
                    </div>
                </div>

                <!-- Tags -->
                <div style="margin-bottom: 1.5rem;">
                    <strong style="color: var(--color-text-secondary);">
                        <span aria-hidden="true">ğŸ·ï¸</span> ã‚¿ã‚°:
                    </strong>
                    <div class="tags" id="tagsList" style="display: inline-flex; margin-left: 0.5rem;">
                        <span class="tag">Apache</span>
                        <span class="tag">ã‚¨ãƒ©ãƒ¼å¯¾å¿œ</span>
                        <span class="tag">éšœå®³</span>
                    </div>
                </div>

                <!-- Divider -->
                <div class="divider"></div>

                <!-- Main Content -->
                <section aria-labelledby="content-heading">
                    <h2 id="content-heading" style="margin-bottom: 1rem;">
                        <span aria-hidden="true">ğŸ“„</span> è©³ç´°å†…å®¹
                    </h2>
                    <div id="knowledgeContent" style="line-height: 1.8; white-space: pre-wrap; color: var(--color-text);">## ç™ºç”Ÿäº‹è±¡

Webã‚µãƒ¼ãƒãƒ¼ï¼ˆApacheï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€503 Service Unavailableã‚¨ãƒ©ãƒ¼ãŒè¿”ã•ã‚Œã‚‹ã€‚

## å½±éŸ¿ç¯„å›²

- æœ¬ç•ªWebã‚µãƒ¼ãƒãƒ¼: web01.example.com
- ç™ºç”Ÿæ™‚åˆ»: 2026-01-15 14:00
- å½±éŸ¿ãƒ¦ãƒ¼ã‚¶ãƒ¼: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼

## å¯¾å¿œå†…å®¹

### 1. ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ç¢ºèª

```bash
sudo tail -f /var/log/apache2/error.log
```

### 2. Apacheãƒ—ãƒ­ã‚»ã‚¹ã®ç¢ºèª

```bash
sudo systemctl status apache2
```

### 3. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œè¨¼

```bash
sudo apache2ctl configtest
```

### 4. ã‚µãƒ¼ãƒ“ã‚¹ã®å†èµ·å‹•

```bash
sudo systemctl restart apache2
```

## åŸå› 

MaxRequestWorkersè¨­å®šå€¤ãŒä¸è¶³ã—ã¦ãŠã‚Šã€æ¥ç¶šå¯èƒ½ãªæœ€å¤§ãƒ—ãƒ­ã‚»ã‚¹æ•°ã«é”ã—ã¦ã„ãŸã€‚

## æ’ä¹…å¯¾ç­–

/etc/apache2/mods-available/mpm_prefork.confã®MaxRequestWorkersã‚’150ã‹ã‚‰300ã«å¢—åŠ ã€‚

```apache
<IfModule mpm_prefork_module>
    StartServers             5
    MinSpareServers          5
    MaxSpareServers         10
    MaxRequestWorkers      300
    MaxConnectionsPerChild   0
</IfModule>
```

## å‚è€ƒãƒªãƒ³ã‚¯

- Apache HTTP Server Documentation: https://httpd.apache.org/docs/
- Server Fault: https://serverfault.com/questions/tagged/apache2
</div>
                </section>

                <!-- AI Insights -->
                <section style="margin-top: 2rem;" aria-labelledby="insights-heading">
                    <div style="background: #fff3e0; padding: 1rem; border-radius: var(--radius-md); border-left: 4px solid var(--color-warning);">
                        <h3 id="insights-heading" style="font-size: 1rem; margin-bottom: 0.5rem; color: #e65100;">
                            <span aria-hidden="true">ğŸ’¡</span> æŠ½å‡ºã•ã‚ŒãŸçŸ¥è¦‹
                        </h3>
                        <ul id="insightsList" style="margin-left: 1.5rem; line-height: 1.8; color: #666;">
                            <li>503ã‚¨ãƒ©ãƒ¼ã¯ã‚µãƒ¼ãƒãƒ¼ãƒªã‚½ãƒ¼ã‚¹ä¸è¶³ãŒä¸»ãªåŸå› </li>
                            <li>MaxRequestWorkersè¨­å®šã®æœ€é©åŒ–ãŒé‡è¦</li>
                            <li>å®šæœŸçš„ãªãƒ­ã‚°ç›£è¦–ã«ã‚ˆã‚Šæ—©æœŸç™ºè¦‹ãŒå¯èƒ½</li>
                            <li>è² è·ãƒ†ã‚¹ãƒˆã«ã‚ˆã‚‹è¨­å®šå€¤ã®äº‹å‰æ¤œè¨¼ã‚’æ¨å¥¨</li>
                        </ul>
                    </div>
                </section>
            </article>

            <!-- Related Knowledge -->
            <section class="section" aria-labelledby="related-heading">
                <div class="card">
                    <h2 id="related-heading" class="card-title">
                        <span aria-hidden="true">ğŸ”—</span> é–¢é€£ãƒŠãƒ¬ãƒƒã‚¸
                    </h2>
                    <div class="card-body">
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <article style="padding: 1rem; border-left: 3px solid var(--color-problem); background: var(--color-bg); border-radius: var(--radius-md);">
                                <div style="display: flex; justify-content: space-between; align-items: start;">
                                    <div style="flex: 1;">
                                        <h3 style="font-size: 1rem; margin-bottom: 0.25rem;">
                                            <a href="detail.html?id=2" style="color: var(--color-primary); text-decoration: none;">
                                                Apacheãƒ—ãƒ­ã‚»ã‚¹æ•°ã®æœ€é©åŒ–æ–¹æ³•
                                            </a>
                                        </h3>
                                        <p style="color: var(--color-text-secondary); font-size: 0.875rem; margin: 0;">
                                            é–¢ä¿‚: åŸå› èª¿æŸ»
                                        </p>
                                    </div>
                                    <span class="badge badge-problem">Problem</span>
                                </div>
                            </article>

                            <article style="padding: 1rem; border-left: 3px solid var(--color-change); background: var(--color-bg); border-radius: var(--radius-md);">
                                <div style="display: flex; justify-content: space-between; align-items: start;">
                                    <div style="flex: 1;">
                                        <h3 style="font-size: 1rem; margin-bottom: 0.25rem;">
                                            <a href="detail.html?id=3" style="color: var(--color-primary); text-decoration: none;">
                                                Apacheè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
                                            </a>
                                        </h3>
                                        <p style="color: var(--color-text-secondary); font-size: 0.875rem; margin: 0;">
                                            é–¢ä¿‚: æ’ä¹…å¯¾ç­–
                                        </p>
                                    </div>
                                    <span class="badge badge-change">Change</span>
                                </div>
                            </article>

                            <article style="padding: 1rem; border-left: 3px solid var(--color-incident); background: var(--color-bg); border-radius: var(--radius-md);">
                                <div style="display: flex; justify-content: space-between; align-items: start;">
                                    <div style="flex: 1;">
                                        <h3 style="font-size: 1rem; margin-bottom: 0.25rem;">
                                            <a href="detail.html?id=4" style="color: var(--color-primary); text-decoration: none;">
                                                Webã‚µãƒ¼ãƒãƒ¼ç›£è¦–ã‚¢ãƒ©ãƒ¼ãƒˆã®è¨­å®š
                                            </a>
                                        </h3>
                                        <p style="color: var(--color-text-secondary); font-size: 0.875rem; margin: 0;">
                                            é–¢ä¿‚: äºˆé˜²æªç½®
                                        </p>
                                    </div>
                                    <span class="badge badge-incident">Incident</span>
                                </div>
                            </article>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Actions -->
            <div style="margin-top: 2rem; display: flex; gap: 1rem;">
                <a href="search.html" class="btn btn-outline">
                    <span aria-hidden="true">ğŸ”</span> æ¤œç´¢ã«æˆ»ã‚‹
                </a>
                <a href="index.html" class="btn btn-outline">
                    <span aria-hidden="true">ğŸ </span> ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹
                </a>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Mirai IT Knowledge Systems</h4>
                    <p>AIã‚’æ´»ç”¨ã—ãŸã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆãªITãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
                </div>
                <div class="footer-section">
                    <h4>ãƒªãƒ³ã‚¯</h4>
                    <p><a href="index.html">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a></p>
                    <p><a href="knowledge-list.html">ãƒŠãƒ¬ãƒƒã‚¸ä¸€è¦§</a></p>
                    <p><a href="search.html">ç¤¾å†…æ¤œç´¢</a></p>
                    <p><a href="ai-search.html">AIæ¤œç´¢</a></p>
                    <p><a href="create.html">ãƒŠãƒ¬ãƒƒã‚¸ä½œæˆ</a></p>
                </div>
                <div class="footer-section">
                    <h4>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h4>
                    <p><a href="README.md">ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</a></p>
                    <p><a href="#" aria-label="APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ">APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Mirai IT Knowledge Systems. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Get knowledge ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const knowledgeId = urlParams.get('id');

        // Load knowledge data
        async function loadKnowledge() {
            if (!knowledgeId) {
                window.location.href = 'search.html';
                return;
            }

            // In production, this would fetch from API
            console.log('Loading knowledge:', knowledgeId);

            // Sample data is already loaded in the HTML
            // In production, replace with: const data = await fetch(`/api/knowledge/${knowledgeId}`).then(r => r.json());
        }

        // Edit knowledge
        function editKnowledge() {
            // In production, navigate to edit page
            window.location.href = `create.html?edit=${knowledgeId}`;
        }

        // Share knowledge
        function shareKnowledge() {
            const url = window.location.href;

            if (navigator.clipboard) {
                navigator.clipboard.writeText(url).then(() => {
                    alert('URLã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
                });
            } else {
                // Fallback for older browsers
                prompt('ã“ã®URLã‚’å…±æœ‰ã—ã¦ãã ã•ã„:', url);
            }
        }

        // Print knowledge
        function printKnowledge() {
            window.print();
        }

        // Add keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // e key - edit
            if (e.key === 'e' && !e.ctrlKey && !e.metaKey) {
                e.preventDefault();
                editKnowledge();
            }
            // s key - share
            if (e.key === 's' && !e.ctrlKey && !e.metaKey) {
                e.preventDefault();
                shareKnowledge();
            }
            // p key - print
            if (e.key === 'p' && !e.ctrlKey && !e.metaKey) {
                e.preventDefault();
                printKnowledge();
            }
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', loadKnowledge);
    </script>
</body>
</html>
