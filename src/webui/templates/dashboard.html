{% extends "base.html" %}

{% block title %}ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - Mirai IT Knowledge Systems{% endblock %}

{% block content %}
<h2 style="margin-bottom: 1.5rem;">ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>

<div class="stats">
    <div class="stat-card">
        <h3>{{ stats.total_knowledge }}</h3>
        <p>ç·ãƒŠãƒ¬ãƒƒã‚¸æ•°</p>
    </div>
    {% for itsm_type, count in stats.by_itsm_type.items() %}
    <div class="stat-card">
        <h3>{{ count }}</h3>
        <p>{{ itsm_type }}</p>
    </div>
    {% endfor %}
</div>

<div class="card">
    <h3>âš¡ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œå±¥æ­´ï¼ˆæœ€æ–°10ä»¶ï¼‰</h3>
    {% if workflow_history %}
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="border-bottom: 2px solid #eee;">
                <th style="text-align: left; padding: 0.75rem;">ID</th>
                <th style="text-align: left; padding: 0.75rem;">ã‚¿ã‚¤ãƒ—</th>
                <th style="text-align: left; padding: 0.75rem;">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                <th style="text-align: left; padding: 0.75rem;">å®Ÿè¡Œæ™‚é–“</th>
                <th style="text-align: left; padding: 0.75rem;">ä½œæˆæ—¥æ™‚</th>
            </tr>
        </thead>
        <tbody>
            {% for workflow in workflow_history %}
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 0.75rem;">#{{ workflow.id }}</td>
                <td style="padding: 0.75rem;">{{ workflow.workflow_type }}</td>
                <td style="padding: 0.75rem;">
                    {% if workflow.status == 'completed' %}
                    <span class="badge" style="background: #e8f5e9; color: #388e3c;">å®Œäº†</span>
                    {% elif workflow.status == 'failed' %}
                    <span class="badge" style="background: #ffebee; color: #c62828;">å¤±æ•—</span>
                    {% elif workflow.status == 'running' %}
                    <span class="badge" style="background: #e3f2fd; color: #1976d2;">å®Ÿè¡Œä¸­</span>
                    {% else %}
                    <span class="badge" style="background: #e0e0e0; color: #616161;">{{ workflow.status }}</span>
                    {% endif %}
                </td>
                <td style="padding: 0.75rem;">
                    {% if workflow.execution_time_ms %}
                    {{ workflow.execution_time_ms }}ms
                    {% else %}
                    -
                    {% endif %}
                </td>
                <td style="padding: 0.75rem;">{{ workflow.created_at }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="color: #666; padding: 2rem; text-align: center;">ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œå±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</p>
    {% endif %}
</div>

<div class="card">
    <h3>ğŸ“ˆ ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±</h3>
    <div style="line-height: 2;">
        <p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³:</strong> 1.0.0</p>
        <p><strong>ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£:</strong> Claude Code Workflow</p>
        <p><strong>ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ•°:</strong> 6å€‹</p>
        <p><strong>ãƒ•ãƒƒã‚¯æ•°:</strong> 5å€‹</p>
        <p><strong>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹:</strong> SQLite</p>
    </div>
</div>
{% endblock %}
