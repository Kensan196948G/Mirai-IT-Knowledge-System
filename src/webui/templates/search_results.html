{% extends "base.html" %}

{% block title %}æ¤œç´¢çµæœ - Mirai IT Knowledge Systems{% endblock %}

{% block content %}
<div class="card">
    <h2>ğŸ” æ¤œç´¢çµæœ</h2>
    <p style="color: #666; margin-bottom: 1rem;">
        {% if query %}
        ã€Œ<strong>{{ query }}</strong>ã€ã®æ¤œç´¢çµæœ: {{ results|length }}ä»¶
        {% else %}
        å…¨ãƒŠãƒ¬ãƒƒã‚¸: {{ results|length }}ä»¶
        {% endif %}
    </p>

    {% if results %}
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="border-bottom: 2px solid #eee;">
                <th style="text-align: left; padding: 0.75rem;">ã‚¿ã‚¤ãƒˆãƒ«</th>
                <th style="text-align: left; padding: 0.75rem;">ã‚¿ã‚¤ãƒ—</th>
                <th style="text-align: left; padding: 0.75rem;">è¦ç´„</th>
                <th style="text-align: left; padding: 0.75rem;">ä½œæˆæ—¥æ™‚</th>
            </tr>
        </thead>
        <tbody>
            {% for knowledge in results %}
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 0.75rem;">
                    <a href="/knowledge/{{ knowledge.id }}" style="color: #667eea; text-decoration: none; font-weight: 500;">
                        {{ knowledge.title }}
                    </a>
                </td>
                <td style="padding: 0.75rem;">
                    <span class="badge badge-{{ knowledge.itsm_type.lower() }}">
                        {{ knowledge.itsm_type }}
                    </span>
                </td>
                <td style="padding: 0.75rem; max-width: 400px;">
                    <small style="color: #666;">
                        {{ knowledge.summary_non_technical[:100] }}{% if knowledge.summary_non_technical|length > 100 %}...{% endif %}
                    </small>
                </td>
                <td style="padding: 0.75rem; white-space: nowrap;">
                    {{ knowledge.created_at[:10] }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div style="text-align: center; padding: 3rem; color: #666;">
        <p style="font-size: 3rem;">ğŸ”</p>
        <p>æ¤œç´¢æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ãƒŠãƒ¬ãƒƒã‚¸ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</p>
        <p style="margin-top: 1rem;">
            <a href="/knowledge/search" class="btn btn-secondary">æ¤œç´¢æ¡ä»¶ã‚’å¤‰æ›´</a>
        </p>
    </div>
    {% endif %}
</div>

<div style="margin-top: 2rem;">
    <a href="/knowledge/search" class="btn btn-secondary">æ–°ã—ã„æ¤œç´¢</a>
    <a href="/" class="btn btn-secondary" style="margin-left: 1rem;">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
</div>
{% endblock %}
