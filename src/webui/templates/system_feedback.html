{% extends "base.html" %}

{% block title %}ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ - Mirai IT Knowledge Systems{% endblock %}

{% block breadcrumb %}
<div class="breadcrumb">
    <div class="breadcrumb-content">
        <a href="/">ãƒ›ãƒ¼ãƒ </a>
        <span class="breadcrumb-separator">â€º</span>
        <span>ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</span>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="card">
    <h2>ğŸ’¬ ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</h2>
    <p style="color: #666; margin-bottom: 1.5rem;">
        ã‚·ã‚¹ãƒ†ãƒ ã®æ”¹å–„ææ¡ˆã€ãƒã‚°å ±å‘Šã€æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆãªã©ã‚’ãŠå¯„ã›ãã ã•ã„ã€‚
    </p>

    <form method="POST" action="/feedback">
        <div class="form-group">
            <label for="category">ã‚«ãƒ†ã‚´ãƒª *</label>
            <select id="category" name="category" required>
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option value="ui">ğŸ¨ UIæ”¹å–„</option>
                <option value="search">ğŸ” æ¤œç´¢æ©Ÿèƒ½</option>
                <option value="quality">âœ¨ ãƒŠãƒ¬ãƒƒã‚¸å“è³ª</option>
                <option value="performance">âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</option>
                <option value="feature_request">ğŸ’¡ æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</option>
                <option value="bug">ğŸ› ãƒã‚°å ±å‘Š</option>
                <option value="other">ğŸ“ ãã®ä»–</option>
            </select>
        </div>

        <div class="form-group">
            <label for="title">ã‚¿ã‚¤ãƒˆãƒ« *</label>
            <input type="text" id="title" name="title" required placeholder="ä¾‹: æ¤œç´¢çµæœã®è¡¨ç¤ºã‚’æ”¹å–„ã—ã¦ã»ã—ã„">
        </div>

        <div class="form-group">
            <label for="description">è©³ç´°èª¬æ˜ *</label>
            <textarea id="description" name="description" required placeholder="ã§ãã‚‹ã ã‘å…·ä½“çš„ã«èª¬æ˜ã—ã¦ãã ã•ã„..."></textarea>
        </div>

        <div class="form-group">
            <label for="priority">å„ªå…ˆåº¦</label>
            <select id="priority" name="priority">
                <option value="low">ä½</option>
                <option value="medium" selected>ä¸­</option>
                <option value="high">é«˜</option>
                <option value="critical">ç·Šæ€¥</option>
            </select>
        </div>

        <div class="form-group">
            <label for="user_id">ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰</label>
            <input type="text" id="user_id" name="user_id" placeholder="åŒ¿å">
        </div>

        <button type="submit" class="btn">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é€ä¿¡</button>
        <a href="/" class="btn btn-secondary" style="margin-left: 1rem;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</a>
    </form>
</div>

<!-- Feedback List -->
<div class="card">
    <h3 style="margin-bottom: 1rem;">ğŸ“‹ æœ€è¿‘ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</h3>

    {% if feedbacks %}
    <table>
        <thead>
            <tr>
                <th style="width: 80px;">çŠ¶æ…‹</th>
                <th>ã‚¿ã‚¤ãƒˆãƒ«</th>
                <th style="width: 120px;">ã‚«ãƒ†ã‚´ãƒª</th>
                <th style="width: 80px;">å„ªå…ˆåº¦</th>
                <th style="width: 150px;">ä½œæˆæ—¥æ™‚</th>
            </tr>
        </thead>
        <tbody>
            {% for feedback in feedbacks %}
            <tr>
                <td>
                    {% if feedback.status == 'new' %}
                    <span class="badge" style="background: #e3f2fd; color: #1976d2;">æ–°è¦</span>
                    {% elif feedback.status == 'reviewing' %}
                    <span class="badge" style="background: #fff3e0; color: #f57c00;">ç¢ºèªä¸­</span>
                    {% elif feedback.status == 'planned' %}
                    <span class="badge" style="background: #f3e5f5; color: #7b1fa2;">è¨ˆç”»ä¸­</span>
                    {% elif feedback.status == 'in_progress' %}
                    <span class="badge" style="background: #e8f5e9; color: #388e3c;">å¯¾å¿œä¸­</span>
                    {% elif feedback.status == 'completed' %}
                    <span class="badge" style="background: #c8e6c9; color: #2e7d32;">å®Œäº†</span>
                    {% elif feedback.status == 'rejected' %}
                    <span class="badge" style="background: #ffebee; color: #c62828;">å´ä¸‹</span>
                    {% else %}
                    <span class="badge" style="background: #e0e0e0; color: #616161;">{{ feedback.status }}</span>
                    {% endif %}
                </td>
                <td>
                    <strong>{{ feedback.title }}</strong>
                    <br>
                    <small style="color: #666;">{{ feedback.description[:100] }}{% if feedback.description|length > 100 %}...{% endif %}</small>
                </td>
                <td>
                    <span style="font-size: 0.9rem;">
                        {% if feedback.feedback_category == 'ui' %}ğŸ¨ UI
                        {% elif feedback.feedback_category == 'search' %}ğŸ” æ¤œç´¢
                        {% elif feedback.feedback_category == 'quality' %}âœ¨ å“è³ª
                        {% elif feedback.feedback_category == 'performance' %}âš¡ æ€§èƒ½
                        {% elif feedback.feedback_category == 'feature_request' %}ğŸ’¡ æ©Ÿèƒ½
                        {% elif feedback.feedback_category == 'bug' %}ğŸ› ãƒã‚°
                        {% else %}ğŸ“ ãã®ä»–{% endif %}
                    </span>
                </td>
                <td style="text-align: center;">
                    {% if feedback.priority == 'critical' %}
                    <span style="color: #c62828; font-weight: bold;">!!!</span>
                    {% elif feedback.priority == 'high' %}
                    <span style="color: #f57c00; font-weight: bold;">!!</span>
                    {% elif feedback.priority == 'medium' %}
                    <span style="color: #ffa726;">!</span>
                    {% else %}
                    <span style="color: #999;">-</span>
                    {% endif %}
                </td>
                <td style="color: #666; font-size: 0.9rem;">
                    {{ feedback.created_at[:16] }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-state">
        <div class="empty-state-icon">ğŸ’¬</div>
        <p>ã¾ã ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒã‚ã‚Šã¾ã›ã‚“</p>
        <small style="color: #999;">ä¸Šã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰æœ€åˆã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é€ä¿¡ã—ã¦ãã ã•ã„</small>
    </div>
    {% endif %}
</div>

<!-- Tips -->
<div class="card" style="background: #e8f5e9; border-left: 4px solid #4CAF50;">
    <h4 style="color: #388e3c; margin-bottom: 0.5rem;">ğŸ’¡ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ãƒ’ãƒ³ãƒˆ</h4>
    <ul style="line-height: 1.8; color: #666; margin-left: 1.5rem;">
        <li>å…·ä½“çš„ãªæ”¹å–„æ¡ˆã‚’å«ã‚ã‚‹ã¨ã€å¯¾å¿œãŒã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚Šã¾ã™</li>
        <li>ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚Œã°ã€èª¬æ˜ã«å«ã‚ã¦ãã ã•ã„</li>
        <li>ãƒã‚°å ±å‘Šã®å ´åˆã¯ã€å†ç¾æ‰‹é †ã‚’è©³ã—ãè¨˜è¼‰ã—ã¦ãã ã•ã„</li>
        <li>æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å ´åˆã¯ã€ãªãœãã®æ©Ÿèƒ½ãŒå¿…è¦ã‹ã‚‚èª¬æ˜ã—ã¦ãã ã•ã„</li>
    </ul>
</div>
{% endblock %}
