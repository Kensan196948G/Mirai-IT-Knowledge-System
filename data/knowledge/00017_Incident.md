# VPN接続エラー対応（証明書期限切れ）

## メタ情報

| 項目 | 値 |
|------|-----|
| **ナレッジID** | 00017 |
| **ITSMタイプ** | Incident |
| **作成日** | 2026-02-03 |
| **重要度** | High |
| **品質スコア** | 0.67 |
| **ITSM準拠度** | 50% |

## タグ

`VPN` `証明書` `ネットワーク` `セキュリティ` `障害対応`

## 要約

### 3行要約
1. 社外からVPN接続できない問題が報告されました
2. 原因はVPNクライアント証明書の期限切れです
3. 解決策は証明書の更新手順に従い新しい証明書をインストールすることです

### 技術者向け要約
Incident: VPN接続エラー対応 / 関連技術: VPN, 証明書, クライアント, インストール / 事象検知あり / 影響範囲記録あり / 対応策確定

### 非技術者向け要約
【インシデント（障害対応）】VPN接続エラー対応 - 影響範囲: 特定ユーザー（社外接続者） / 重要度: 重要 / 状態: 対応可能

---

## 問題の概要

社外から社内システムへのVPN接続ができない問題が発生。

### 症状
- VPNクライアントで接続時にエラーメッセージが表示
- 接続が確立できずタイムアウト

### 影響範囲
- 社外からVPN接続する全ユーザー

---

## 原因

**VPNクライアント証明書の有効期限切れ**

- 証明書の有効期限が切れていたため認証に失敗
- VPNサーバーが古い証明書を拒否

### 確認方法
```bash
# 証明書の有効期限を確認
openssl x509 -in /path/to/client.crt -noout -dates
```

---

## 対応手順

1. **証明書の有効期限確認**
   - VPNクライアントを起動
   - 設定 > 証明書 > 有効期限を確認

2. **新しい証明書の取得**
   - 社内ポータルにアクセス
   - 「証明書更新申請」メニューを選択
   - 新しい証明書をダウンロード

3. **証明書のインストール**
   - VPNクライアントに証明書をインポート
   - 古い証明書を削除

4. **接続テスト**
   - VPN再接続
   - 社内リソースへのアクセス確認

---

## 予防策

- 証明書期限の30日前に自動通知メールを設定
- 定期的な証明書有効期限の監視スクリプト導入
- 証明書ライフサイクル管理（CLM）ツールの検討

### 監視スクリプト例
```bash
#!/bin/bash
# VPN証明書の有効期限チェック
CERT_PATH="/path/to/client.crt"
EXPIRY_DATE=$(openssl x509 -in $CERT_PATH -noout -enddate | cut -d= -f2)
EXPIRY_EPOCH=$(date -d "$EXPIRY_DATE" +%s)
CURRENT_EPOCH=$(date +%s)
DAYS_LEFT=$(( ($EXPIRY_EPOCH - $CURRENT_EPOCH) / 86400 ))

if [ $DAYS_LEFT -lt 30 ]; then
  echo "警告: VPN証明書の有効期限まで${DAYS_LEFT}日です"
fi
```

---

## SubAgent分析結果

| SubAgent | 結果 | スコア |
|----------|------|--------|
| Architect | 整合性チェック完了 | 0.67 |
| KnowledgeCurator | タグ・カテゴリ抽出完了 | 0.60 |
| ITSMExpert | Incident分類、準拠度50% | 0.50 |
| DevOps | 自動化可能性20%（低） | 0.20 |
| QA | 品質スコア40%、改善推奨 | 0.40 |
| Coordinator | 不足項目3件検出 | 0.50 |
| Documenter | 要約生成完了 | 1.00 |

## Hooks実行結果

| Hook | 結果 | 詳細 |
|------|------|------|
| PreTask | PASS | 入力検証完了 |
| DuplicateCheck | PASS | 重複なし（最高類似度5.3%） |
| DeviationCheck | WARNING | ITSM準拠度50%（改善推奨） |
| AutoSummary | PASS | 要約・キーワード生成完了 |
| PostTask | PASS | 統合レビュー完了 |

---

## 関連ナレッジ

- VPN基本設定ガイド（Request）
- SSL/TLS証明書の更新手順（Change）
- 社外ネットワーク接続トラブルシューティング（Incident）

---

## 改善提案

1. **初動対応情報の追加**: 発生時刻、検知方法、第一報の記録
2. **影響範囲の明確化**: 対象ユーザー数、影響システムの範囲
3. **担当者情報**: 検知者、対応者、確認者の記録
4. **対応確認プロセス**: 復旧確認・検証手順の追加

---

*Generated by Mirai IT Knowledge System - Claude Code Workflow*
*SubAgents: 7 | Hooks: 5 | MCP Integrations: 5*
